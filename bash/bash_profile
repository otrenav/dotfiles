#!/usr/bin/env bash

## Author:     Omar Trejo
## IRC handle: otrenav
## IRC server: freenode

##
## OS specific configuation
##
unamestr=`uname`
if [[ "$unamestr" == 'Linux' ]]; then
    ##
    ## Linux setup
    ##
    export PATH="/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/usr/texbin:/bin:/sbin:${PATH}"
    alias ls='ls -lGF --color=auto'
    alias lsall='ls -flaF --color=auto'
    alias firefox-otrenav='firefox -no-remote -P "otrenav" &'
    alias firefox-datata='firefox -no-remote -P "datata" &'
elif [[ "$unamestr" == 'Darwin' ]]; then
    ##
    ## Mac setup
    ##
    export PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/3.4/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/usr/texbin:/bin:/sbin:${PATH}"
    alias ls='ls -lGF'
    alias lsall='ls -flaF'
    alias R='R --no-save --quite'
    alias r='R --no-save --quite'
    alias matlab='/Applications/MATLAB_R2013a.app/bin/matlab'
    alias photoshop='open -a "Adobe Photoshop CS6"'
    alias firefox-otrenav='/Applications/Firefox.app/Contents/MacOS/firefox -no-remote -P "otrenav" &'
    alias firefox-datata='/Applications/Firefox.app/Contents/MacOS/firefox -no-remote -P "datata" &'
fi

export PATH

##
## Aliases
##
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias p='cd ~/Projects; ls;'
alias d='cd ~/Downloads; ls;'

##
## R setup
##
export R_PROFILE_USER='~/.Rprofile'

##
## BASH-IT (terminal customization)
##
export BASH_IT=$HOME/.bash_it
export BASH_IT_THEME='otrenav'
source $BASH_IT/bash_it.sh
HISTCONTROL=ignoredups:ignorespace

## Check window size after each
## command to adjust accordingly
shopt -s checkwinsize

##
## ITAM Research
##
export PROJECTS_PATH=~/Projects/itam/research

##
## Virtual Environments for Python
##
export WORKON_HOME=~/Projects/python/envs
export VIRTUALENVWRAPPER_PYTHON=`which python`
export VIRTUALENVWRAPPER_VIRTUALENV=`which virtualenv`
source `which virtualenvwrapper.sh`

##
## Git configuration
##
source ~/.git-completion.bash

##
## Google Cloud SDK
##
source ~/Projects/system/google-cloud-sdk/path.bash.inc
source ~/Projects/system/google-cloud-sdk/completion.bash.inc

##
## Emacs
##
export EDITOR=emacsclient
export VISUAL=emacsclient
export ALTERNATE_EDITOR=""
function emacs() {
    emacsclient -c -a "" "$@" &
}

##
## File or directory size
##
function file_directory_size() {
    if du -b /dev/null > /dev/null 2>&1; then
        local arg=-sbh
    else
        local arg=-sh
    fi
    if [[ -n "$@" ]]; then
        du $arg -- "$@"
    else
        du $arg .[^.]* *
    fi
}

##
## Update all projects in directory
## GUD := Git Up Directories
##
function gud() {
    for d in */; do
        echo $d
        cd $d
        git up
        echo " "
        cd ..
    done
}

##
## Count total number of files
## in a folder, including symlinks
##
function file_count() {
    total=0;
    for object in `find . -type l`; do
        count_in_folder=`find $object"/" | wc -l;`
        echo "Count in current $l/: $count_in_folder"
        let total=$total+$count_in_folder
    done
    echo "Total number of files: "$t
}
